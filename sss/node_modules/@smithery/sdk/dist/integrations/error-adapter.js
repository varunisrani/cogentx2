import { CallToolResultSchema, } from "@modelcontextprotocol/sdk/types.js";
/**
 * Wraps each tool call so any errors get sent back to the LLM instead of throwing
 */
export function wrapErrorAdapter(client) {
    const callTool = client.callTool.bind(client);
    client.callTool = async (params, resultSchema = CallToolResultSchema, options) => {
        try {
            return await callTool(params, resultSchema, options);
        }
        catch (err) {
            console.error("Tool calling error:", err);
            return {
                content: [
                    {
                        type: "text",
                        text: JSON.stringify(err, Object.getOwnPropertyNames(err)),
                    },
                ],
                isError: true,
            };
        }
    };
    return client;
}
